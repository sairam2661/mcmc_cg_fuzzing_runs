set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testprefix complex_query

set ::timeout 60000
set sqlite_setting_cache 100000

proc clear_cache {} {
  set sqlite_setting_cache 100000
}

proc start_time {} {
  global tstart
  set tstart 1
}

proc test_timer {handler time} {
  global tstart
  if $time } {
    $handler
  }
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after $tstart test_timer $handler $time
  set tstart 1
  after $tstart test_timer $handler $time
  set tstart 0
  after